{% extends "base.html" %}
{% block title %}{{ hotel.nombre }} - Hoteles de Cine{% endblock %}
{% block content %}

<!-- Hotel Hero -->
<section class="hotel-hero">
    <div class="hotel-hero-image">
        {% if hotel.imagenes and hotel.imagenes.hotel %}
            {% if hotel.imagenes.hotel.startswith('http') %}
                <img src="{{ hotel.imagenes.hotel }}" alt="{{ hotel.nombre }}">
            {% else %}
                <img src="{{ base_url }}/{{ hotel.imagenes.hotel }}" alt="{{ hotel.nombre }}">
            {% endif %}
        {% else %}
            <img src="https://images.unsplash.com/photo-1571896349842-33c89424de2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" alt="{{ hotel.nombre }}">
        {% endif %}
        <div class="hotel-hero-overlay"></div>
    </div>
    <div class="hotel-hero-content">
        <div class="container">
            <div class="hotel-breadcrumb">
                <a href="{{ base_url }}/">Inicio</a> / <a href="{{ base_url }}/#hoteles">Hoteles</a> / <span>{{ hotel.nombre }}</span>
            </div>
            <h1>{{ hotel.nombre }}</h1>
            <div class="hotel-meta">
                <span class="hotel-movie">
                    <i class="fas fa-film"></i>
                    {{ hotel.pelicula }} ({{ hotel.anio }})
                </span>
                <span class="hotel-location">
                    <i class="fas fa-map-marker-alt"></i>
                    {{ hotel.ubicacion }}
                </span>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<main class="container hotel-detail-container">
    <!-- Hotel Info Section -->
    <section class="hotel-info-section">
        <div class="hotel-card">
            <div class="hotel-card-header">
                <div class="hotel-title-section">
                    <h2>Información del Hotel</h2>
                    <div class="hotel-rating-large">
                        <div class="stars">
                            {% for i in range(5) %}
                                {% if i < hotel.rating|float|int %}
                                    <span class="star filled">★</span>
                                {% else %}
                                    <span class="star">☆</span>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <span class="rating-value">{{ hotel.rating }}/5</span>
                    </div>
                </div>
                
                <div class="hotel-booking">
                    <div class="price-tag">
                        <span class="price-currency">$</span>
                        <span class="price-amount">{{ hotel.precio }}</span>
                        <span class="price-period">por noche</span>
                    </div>
                    <button class="btn btn-primary btn-large">Reservar Ahora</button>
                </div>
            </div>
            
            <div class="hotel-description">
                <h3><i class="fas fa-info-circle"></i> Descripción</h3>
                <p>{{ hotel.descripcion }}</p>
            </div>
            
            <div class="hotel-features">
                <h3><i class="fas fa-star"></i> Características</h3>
                <div class="features-grid">
                    {% for caracteristica in hotel.caracteristicas %}
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>{{ caracteristica }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <div class="hotel-movie-info">
                <h3><i class="fas fa-video"></i> Información de la Película</h3>
                <div class="movie-details">
                    <div class="movie-detail-item">
                        <span class="detail-label">Película:</span>
                        <span class="detail-value">{{ hotel.pelicula }}</span>
                    </div>
                    <div class="movie-detail-item">
                        <span class="detail-label">Año:</span>
                        <span class="detail-value">{{ hotel.anio }}</span>
                    </div>
                    <div class="movie-detail-item">
                        <span class="detail-label">Escenas:</span>
                        <span class="detail-value">Varias escenas clave filmadas en este hotel</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Hotel Gallery Section -->
    <section class="hotel-gallery-section">
        <div class="hotel-card">
            <h2><i class="fas fa-images"></i> Galería</h2>
            
            <div class="hotel-gallery">
                {% if hotel.imagenes and hotel.imagenes.hotel %}
                <div class="gallery-main">
                    {% if hotel.imagenes.hotel.startswith('http') %}
                        <img src="{{ hotel.imagenes.hotel }}" alt="{{ hotel.nombre }}" id="gallery-main-image">
                    {% else %}
                        <img src="{{ base_url }}/{{ hotel.imagenes.hotel }}" alt="{{ hotel.nombre }}" id="gallery-main-image">
                    {% endif %}
                </div>
                {% endif %}
                
                {% if hotel.imagenes and hotel.imagenes.pelicula %}
                <div class="gallery-thumbnails">
                    {% for imagen in hotel.imagenes.pelicula %}
                        {% if imagen.startswith('http') %}
                            <img src="{{ imagen }}" alt="Escena de {{ hotel.pelicula }}" class="gallery-thumbnail" onclick="changeMainImage('{{ imagen }}')">
                        {% else %}
                            <img src="{{ base_url }}/{{ imagen }}" alt="Escena de {{ hotel.pelicula }}" class="gallery-thumbnail" onclick="changeMainImage('{{ base_url }}/{{ imagen }}')">
                        {% endif %}
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            
            {% if hotel.imagenes and hotel.imagenes.galeria %}
            <div class="gallery-more">
                <h3><i class="fas fa-th-large"></i> Más Imágenes</h3>
                <div class="gallery-grid">
                    {% for imagen in hotel.imagenes.galeria %}
                        {% if imagen.startswith('http') %}
                            <img src="{{ imagen }}" alt="{{ hotel.nombre }}" class="gallery-grid-item" onclick="openLightbox('{{ imagen }}')">
                        {% else %}
                            <img src="{{ base_url }}/{{ imagen }}" alt="{{ hotel.nombre }}" class="gallery-grid-item" onclick="openLightbox('{{ base_url }}/{{ imagen }}')">
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- Testimonials Section -->
    {% if hotel.testimonios %}
    <section class="hotel-testimonials">
        <div class="hotel-card">
            <h2><i class="fas fa-comments"></i> Testimonios de Huéspedes</h2>
            <div class="testimonials-list">
                {% for testimonio in hotel.testimonios %}
                <div class="testimonial-item">
                    <div class="testimonial-content">
                        <blockquote>
                            <p>"{{ testimonio.texto }}"</p>
                        </blockquote>
                    </div>
                    <div class="testimonial-author">
                        <img src="{{ testimonio.avatar }}" alt="{{ testimonio.autor }}" class="author-avatar">
                        <div class="author-info">
                            <h4>{{ testimonio.autor }}</h4>
                            <p class="author-date">{{ testimonio.fecha }}</p>
                            <p class="author-hotel">{{ hotel.nombre }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Booking CTA Section -->
    <section class="booking-cta">
        <div class="booking-cta-content">
            <div class="cta-text">
                <h2><i class="fas fa-bed"></i> ¿Listo para vivir tu propia escena de cine?</h2>
                <p>Reserva ahora en {{ hotel.nombre }} y experimenta el lujo que vieron tus personajes favoritos.</p>
            </div>
            <div class="cta-actions">
                <button class="btn btn-primary btn-large">
                    <i class="fas fa-calendar-check"></i>
                    Reservar Ahora
                </button>
                <a href="{{ base_url }}/" class="btn btn-outline">
                    <i class="fas fa-arrow-left"></i>
                    Ver Más Hoteles
                </a>
            </div>
        </div>
    </section>

    <!-- Similar Hotels Section -->
    <section class="similar-hotels">
        <div class="hotel-card">
            <h2><i class="fas fa-hotel"></i> Hoteles Similares</h2>
            <div class="similar-hotels-grid">
                <div class="similar-hotel-placeholder">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Cargando hoteles similares...</p>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- Lightbox Modal -->
<div id="lightbox" class="lightbox">
    <div class="lightbox-content">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-image" src="" alt="">
        <div class="lightbox-caption"></div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
// Gallery functionality
function changeMainImage(src) {
    const mainImage = document.getElementById('gallery-main-image');
    if (mainImage) {
        mainImage.src = src;
        mainImage.style.animation = 'fadeIn 0.5s ease';
    }
}

// Lightbox functionality
function openLightbox(src) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = lightbox.querySelector('.lightbox-image');
    
    lightboxImage.src = src;
    lightbox.style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

// Close lightbox
document.addEventListener('DOMContentLoaded', function() {
    const lightbox = document.getElementById('lightbox');
    const closeBtn = lightbox.querySelector('.lightbox-close');
    
    closeBtn.addEventListener('click', function() {
        lightbox.style.display = 'none';
        document.body.style.overflow = 'auto';
    });
    
    lightbox.addEventListener('click', function(e) {
        if (e.target === lightbox) {
            lightbox.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    });
});

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
</script>
{% endblock %}