{% extends "base.html" %}
{% block title %}Hoteles de Cine - Alojamientos donde se rodaron películas y series{% endblock %}
{% block content %}

<section class="hero">
    <h1>Alojamientos que Fueron Escenario de Películas y Series</h1>
    <p>Descubre los hoteles de lujo donde se rodaron tus escenas favoritas y vive la experiencia de ser protagonista</p>
    <a href="#hoteles" class="cta-button">Explorar Hoteles</a>
</section>

<section class="stats">
    <h2>Hoteles Icónicos de Cine y Televisión</h2>
    <p>Reserva en los mismos lugares que aparecieron en tus películas y series favoritas. Vive la experiencia de dormir donde durmieron las estrellas de Hollywood.</p>
    <div class="stats-grid">
        <div class="stat">
            <span class="stat-number">50+</span>
            <span class="stat-label">Hoteles de Cine</span>
        </div>
        <div class="stat">
            <span class="stat-number">25+</span>
            <span class="stat-label">Países</span>
        </div>
        <div class="stat">
            <span class="stat-number">100+</span>
            <span class="stat-label">Películas y Series</span>
        </div>
    </div>
</section>

<section id="hoteles" class="hotels">
    <h2>Nuestra Colección de Hoteles de Cine</h2>
    <div class="filter-tabs">
        <button class="filter-tab active">Todos</button>
        <button class="filter-tab">Películas</button>
        <button class="filter-tab">Series</button>
        <button class="filter-tab">Más Recientes</button>
    </div>

    <div class="hotels-grid">
        {% for hotel in hoteles %}
        <article class="hotel-card">
            {% set imagen_principal = none %}
            
            {% if hotel.imagenes and hotel.imagenes.pelicula and hotel.imagenes.pelicula|length > 0 %}
                {% set imagen_principal = hotel.imagenes.pelicula[0] %}
            {% endif %}
            
            {% if not imagen_principal and hotel.imagenes and hotel.imagenes.galeria and hotel.imagenes.galeria|length > 0 %}
                {% set imagen_principal = hotel.imagenes.galeria[0] %}
            {% endif %}
            
            {% if not imagen_principal and hotel.imagenes and hotel.imagenes.hotel %}
                {% set imagen_principal = hotel.imagenes.hotel %}
            {% endif %}
            
            {% if not imagen_principal %}
                {% set imagen_principal = "https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" %}
            {% endif %}

            <div class="hotel-image">
                {% if imagen_principal.startswith('http') %}
                    <img src="{{ imagen_principal }}" alt="{{ hotel.nombre }}" loading="lazy">
                {% else %}
                    <img src="{{ base_url }}/{{ imagen_principal }}" alt="{{ hotel.nombre }}" loading="lazy">
                {% endif %}
                <div class="movie-badge">
                    <span class="movie-title">{{ hotel.pelicula }}</span>
                    <span class="movie-year">{{ hotel.anio }}</span>
                </div>
            </div>
            
            <div class="hotel-info">
                <h3>{{ hotel.nombre }}</h3>
                <p class="location">{{ hotel.ubicacion }}</p>
                <p class="description">{{ hotel.descripcion }}</p>
                
                <div class="features">
                    {% for caracteristica in hotel.caracteristicas %}
                        <span class="feature">{{ caracteristica }}</span>
                    {% endfor %}
                </div>
                
                <div class="hotel-rating">
                    <div class="stars">
                        {% for i in range(5) %}
                            {% if i < hotel.rating|float|int %}
                                <span class="star filled">★</span>
                            {% else %}
                                <span class="star">☆</span>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <span class="rating-value">{{ hotel.rating }}</span>
                </div>
                
                <div class="price-section">
                    <span class="price">{{ hotel.precio }}</span>
                    <span class="price-unit">/ noche</span>
                </div>
                
                {% set clean_id = hotel.clean_id if hotel.clean_id is defined else hotel.id %}
                <a href="{{ base_url }}/hotel/{{ clean_id }}/" class="btn-details">Ver detalles</a>
            </div>
        </article>
        {% endfor %}
    </div>
</section>

<section class="testimonials">
    <h2>Experiencias de Cinéfilos</h2>
    <div class="testimonials-grid">
        {% for hotel in hoteles %}
            {% if hotel.testimonios %}
                {% for testimonio in hotel.testimonios %}
                <div class="testimonial">
                    <blockquote>"{{ testimonio.texto }}"</blockquote>
                    <div class="testimonial-author">
                        <img src="{{ testimonio.avatar }}" alt="{{ testimonio.autor }}" loading="lazy">
                        <div class="author-info">
                            <h4>{{ testimonio.autor }}</h4>
                            <p>{{ testimonio.fecha }} • {{ hotel.nombre }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% endif %}
        {% endfor %}
    </div>
</section>

<section class="newsletter">
    <h2>Recibe Nuestras Ofertas de Cine</h2>
    <p>Suscríbete para recibir información sobre nuevos hoteles de cine y ofertas exclusivas.</p>
    <form class="newsletter-form">
        <input type="email" placeholder="Tu email" required>
        <button type="submit">Suscribirse</button>
    </form>
</section>

{% endblock %}